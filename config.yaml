market_cap:
  min: 1000000000 # $1B (per RULES.md line 7)
  max: 500000000000 # $500B (per RULES.md line 7)
beta:
  min: 0.50
  max: 2.5
valuation:
  pe_max: 50.0 # Per RULES.md line 13
  peg_max: 3 # Per RULES.md line 16-22 (strict requirement)
  pfcf_max: 50.0 # Per RULES.md line 26-28 (20-25 range, using 25 as max)
  margin_of_safety: 0.25 # Graham margin of safety for buy-below price
  dcf_scenarios: true # Enable bull/bear/base DCF scenario analysis
profitability:
  roe_min_pct: 15.0 # Per RULES.md line 41-45 (>= 15%)
  roa_min_pct: 5.0
  roic_min_pct: 10.0 # Per RULES.md line 41-45 (>= 10%)
  gross_margin_min_pct: 35.0
  operating_margin_min_pct: 15.0
growth:
  fiftytwowk_percentchange_min_pct: -70.0
  fiftytwowk_percentchange_max_pct: 30.0
  revenue_growth_min_pct: 6.0 # Per RULES.md line 31
  earnings_growth_min_pct: 6.0 # Per RULES.md line 32
  ebitda_growth_min_pct: 6.0 # Per RULES.md line 33
  cagr_min_pct: 6.0 # Per RULES.md line 34-36
balance_sheet:
  debt_to_equity_max: 0.5 # Per RULES.md line 9-11 (D/E < 0.5)
  current_ratio_max: 5.0
  interest_coverage_min: 3.0 # Per RULES.md line 50-54 (EBIT/Interest > 3)
analyst:
  acceptable_ratings:
    - buy
    - strong_buy
    - outperform
    - hold
excluded_symbols:
  - GME
  - AMC
excluded_sectors:
  - Energy
  - Basic Materials
  - Utilities

quality:
  growth_quality_weight: 1.0 # Weight for growth quality in scoring
  quality_trend_lookback_years: 1 # Years to look back for trend analysis

conviction:
  # Category weights (should sum to 100)
  valuation_weight: 25
  quality_weight: 30
  growth_weight: 20
  technical_weight: 15
  sentiment_weight: 10
  risk_penalty_per_flag: 3 # Points deducted per risk warning

# Sector-specific tolerance factors for relative screening
sector_tolerances:
  Technology:
    pe_tolerance: 1.4 # Tech can trade at 40% premium to market
    ps_tolerance: 1.5 # Revenue multiples higher for growth
    growth_premium: 1.2 # Higher growth expectations
    pb_tolerance: 1.3
  Healthcare:
    pe_tolerance: 1.3
    ps_tolerance: 1.4
    growth_premium: 1.1
    pb_tolerance: 1.2
  Financial Services:
    pe_tolerance: 1.0 # Banks trade at lower multiples
    ps_tolerance: 0.8
    growth_premium: 0.9
    pb_tolerance: 1.0
  Consumer Cyclical:
    pe_tolerance: 1.2
    ps_tolerance: 1.1
    growth_premium: 1.0
    pb_tolerance: 1.1
  Consumer Defensive:
    pe_tolerance: 1.1
    ps_tolerance: 1.0
    growth_premium: 0.9
    pb_tolerance: 1.0
  Industrials:
    pe_tolerance: 1.1
    ps_tolerance: 1.0
    growth_premium: 1.0
    pb_tolerance: 1.1
  Communication Services:
    pe_tolerance: 1.3
    ps_tolerance: 1.3
    growth_premium: 1.1
    pb_tolerance: 1.2
  Real Estate:
    pe_tolerance: 1.2
    ps_tolerance: 1.0
    growth_premium: 0.8
    pb_tolerance: 0.9
  default:
    pe_tolerance: 1.2
    ps_tolerance: 1.1
    growth_premium: 1.0
    pb_tolerance: 1.1

# Liquidity requirements
liquidity:
  min_avg_volume: 500000 # Minimum average daily volume
  min_market_cap_millions: 1000 # Minimum market cap in millions

# Portfolio optimization enhancements
portfolio:
  var_confidence: 0.95 # VaR confidence level (95%)
  var_horizon_days: 20 # VaR time horizon (1 month)
  transaction_cost_bps: 10 # Estimated round-trip cost in basis points
  max_correlation: 0.75 # Max pairwise correlation allowed
  min_weight_pct: 2.0 # Minimum position weight
  max_weight_pct: 20.0 # Maximum position weight

# Data quality thresholds
data_quality:
  min_history_days: 252 # Minimum price history required (1 year)
  max_data_age_days: 5 # Maximum age for financial data
  min_analyst_coverage: 3 # Minimum analysts for confidence

# Backtesting configuration
backtest:
  walk_forward_windows: 4 # Number of walk-forward periods
  train_period_months: 12 # Training period for each window
  test_period_months: 3 # Test period for each window
  benchmark_symbol: "SPY" # Benchmark for comparison
